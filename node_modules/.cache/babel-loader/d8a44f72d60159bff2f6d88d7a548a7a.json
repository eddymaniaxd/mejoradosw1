{"ast":null,"code":"var _jsxFileName = \"C:\\\\sw1\\\\FDiagramaC4-master\\\\src\\\\context\\\\authContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer } from 'react';\nimport { apiDiagrama } from '../api/apiDiagrama';\nimport { authReducer } from '../reducer/authReducer';\nimport { types } from '../type/types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const authContext = /*#__PURE__*/createContext(null);\nconst authInitialState = {\n  id: null,\n  name: null,\n  email: null,\n  isAuthenticated: false\n};\nexport const AuthContextProvider = ({\n  children\n}) => {\n  _s();\n\n  const [authState, dispatch] = useReducer(authReducer, authInitialState);\n\n  const login = async (email, password, callback) => {\n    const res = await apiDiagrama(\"/user/login\", \"POST\", {\n      email,\n      password\n    });\n\n    if (res.errors || !res.ok) {\n      callback(true);\n      return;\n    }\n\n    callback(false);\n    const {\n      data\n    } = res;\n    localStorage.setItem(\"keyID\", btoa(JSON.stringify({\n      id: data._id\n    })));\n    dispatch({\n      type: types.authLogin,\n      payload: {\n        id: data._id,\n        name: data.name,\n        email: data.email\n      }\n    });\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"keyID\");\n    dispatch({\n      type: types.authLogout\n    });\n  };\n\n  const createUser = async (name, email, password, callback) => {\n    const res = await apiDiagrama(\"/user/create\", \"POST\", {\n      name,\n      email,\n      password\n    });\n\n    if (res.errors || !res.ok) {\n      callback(true);\n    }\n\n    callback(false);\n    const {\n      data\n    } = res;\n    localStorage.setItem(\"keyID\", btoa(JSON.stringify({\n      id: data._id\n    })));\n    dispatch({\n      type: types.authLogin,\n      payload: {\n        id: data._id,\n        name: data.name,\n        email: data.email\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(authContext.Provider, {\n    value: {\n      auth: authState,\n      login,\n      logout,\n      createUser,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthContextProvider, \"WCtlIuvYgUrsbcajkQaTt4VLY0s=\");\n\n_c = AuthContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["C:/sw1/FDiagramaC4-master/src/context/authContext.js"],"names":["createContext","useReducer","apiDiagrama","authReducer","types","authContext","authInitialState","id","name","email","isAuthenticated","AuthContextProvider","children","authState","dispatch","login","password","callback","res","errors","ok","data","localStorage","setItem","btoa","JSON","stringify","_id","type","authLogin","payload","logout","removeItem","authLogout","createUser","auth"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAA0C,OAA1C;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,KAAT,QAAsB,eAAtB;;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,IAAD,CAAjC;AAEP,MAAMM,gBAAgB,GAAG;AACrBC,EAAAA,EAAE,EAAE,IADiB;AAErBC,EAAAA,IAAI,EAAE,IAFe;AAGrBC,EAAAA,KAAK,EAAE,IAHc;AAIrBC,EAAAA,eAAe,EAAE;AAJI,CAAzB;AAOA,OAAO,MAAMC,mBAAmB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AAEjD,QAAM,CAACC,SAAD,EAAYC,QAAZ,IAAwBb,UAAU,CAACE,WAAD,EAAcG,gBAAd,CAAxC;;AAEA,QAAMS,KAAK,GAAG,OAAON,KAAP,EAAcO,QAAd,EAAwBC,QAAxB,KAAqC;AAE/C,UAAMC,GAAG,GAAG,MAAMhB,WAAW,CAAC,aAAD,EAAgB,MAAhB,EAAwB;AAAEO,MAAAA,KAAF;AAASO,MAAAA;AAAT,KAAxB,CAA7B;;AAEA,QAAIE,GAAG,CAACC,MAAJ,IAAc,CAACD,GAAG,CAACE,EAAvB,EAA2B;AACvBH,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACA;AACH;;AAEDA,IAAAA,QAAQ,CAAC,KAAD,CAAR;AAEA,UAAM;AAAEI,MAAAA;AAAF,QAAWH,GAAjB;AAEAI,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe;AAAEnB,MAAAA,EAAE,EAAEc,IAAI,CAACM;AAAX,KAAf,CAAD,CAAlC;AAEAb,IAAAA,QAAQ,CAAC;AACLc,MAAAA,IAAI,EAAExB,KAAK,CAACyB,SADP;AAELC,MAAAA,OAAO,EAAE;AAAEvB,QAAAA,EAAE,EAAEc,IAAI,CAACM,GAAX;AAAgBnB,QAAAA,IAAI,EAAEa,IAAI,CAACb,IAA3B;AAAiCC,QAAAA,KAAK,EAAEY,IAAI,CAACZ;AAA7C;AAFJ,KAAD,CAAR;AAKH,GApBD;;AAsBA,QAAMsB,MAAM,GAAG,MAAM;AAEjBT,IAAAA,YAAY,CAACU,UAAb,CAAwB,OAAxB;AAEAlB,IAAAA,QAAQ,CAAC;AACLc,MAAAA,IAAI,EAAExB,KAAK,CAAC6B;AADP,KAAD,CAAR;AAGH,GAPD;;AASA,QAAMC,UAAU,GAAG,OAAO1B,IAAP,EAAaC,KAAb,EAAoBO,QAApB,EAA8BC,QAA9B,KAA2C;AAE1D,UAAMC,GAAG,GAAG,MAAMhB,WAAW,CAAC,cAAD,EAAiB,MAAjB,EAAyB;AAAEM,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeO,MAAAA;AAAf,KAAzB,CAA7B;;AAEA,QAAIE,GAAG,CAACC,MAAJ,IAAc,CAACD,GAAG,CAACE,EAAvB,EAA2B;AACvBH,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACH;;AACDA,IAAAA,QAAQ,CAAC,KAAD,CAAR;AAEA,UAAM;AAAEI,MAAAA;AAAF,QAAWH,GAAjB;AAEAI,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe;AAAEnB,MAAAA,EAAE,EAAEc,IAAI,CAACM;AAAX,KAAf,CAAD,CAAlC;AAEAb,IAAAA,QAAQ,CAAC;AACLc,MAAAA,IAAI,EAAExB,KAAK,CAACyB,SADP;AAELC,MAAAA,OAAO,EAAE;AAAEvB,QAAAA,EAAE,EAAEc,IAAI,CAACM,GAAX;AAAgBnB,QAAAA,IAAI,EAAEa,IAAI,CAACb,IAA3B;AAAiCC,QAAAA,KAAK,EAAEY,IAAI,CAACZ;AAA7C;AAFJ,KAAD,CAAR;AAIH,GAjBD;;AAmBA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AACzB0B,MAAAA,IAAI,EAAEtB,SADmB;AAEzBE,MAAAA,KAFyB;AAGzBgB,MAAAA,MAHyB;AAIzBG,MAAAA,UAJyB;AAKzBpB,MAAAA;AALyB,KAA7B;AAAA,cAOKF;AAPL;AAAA;AAAA;AAAA;AAAA,UADJ;AAWH,CAjEM;;GAAMD,mB;;KAAAA,mB","sourcesContent":["import { createContext, useReducer } from 'react';\nimport { apiDiagrama } from '../api/apiDiagrama';\nimport { authReducer } from '../reducer/authReducer';\nimport { types } from '../type/types';\n\nexport const authContext = createContext(null);\n\nconst authInitialState = {\n    id: null,\n    name: null,\n    email: null,\n    isAuthenticated: false\n}\n\nexport const AuthContextProvider = ({ children }) => {\n\n    const [authState, dispatch] = useReducer(authReducer, authInitialState);\n\n    const login = async (email, password, callback) => {\n\n        const res = await apiDiagrama(\"/user/login\", \"POST\", { email, password });\n\n        if (res.errors || !res.ok) {\n            callback(true);\n            return;\n        }\n\n        callback(false);\n\n        const { data } = res;\n\n        localStorage.setItem(\"keyID\", btoa(JSON.stringify({ id: data._id })));\n\n        dispatch({\n            type: types.authLogin,\n            payload: { id: data._id, name: data.name, email: data.email }\n        });\n\n    }\n\n    const logout = () => {\n\n        localStorage.removeItem(\"keyID\");\n\n        dispatch({\n            type: types.authLogout\n        });\n    }\n\n    const createUser = async (name, email, password, callback) => {\n\n        const res = await apiDiagrama(\"/user/create\", \"POST\", { name, email, password });\n\n        if (res.errors || !res.ok) {\n            callback(true);\n        }\n        callback(false);\n\n        const { data } = res;\n\n        localStorage.setItem(\"keyID\", btoa(JSON.stringify({ id: data._id })));\n\n        dispatch({\n            type: types.authLogin,\n            payload: { id: data._id, name: data.name, email: data.email }\n        });\n    }\n\n    return (\n        <authContext.Provider value={{\n            auth: authState,\n            login,\n            logout,\n            createUser,\n            dispatch\n        }}>\n            {children}\n        </authContext.Provider>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}